{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DoeLivros | In√≠cio</title>
    <link rel="stylesheet" href="{% static 'css/global/normalize.css' %}">
    <link rel="stylesheet" href="{% static 'css/global/fonts.css' %}">
    <link rel="stylesheet" href="{% static 'css/global/global.css' %}">
    <link rel="stylesheet" href="{% static 'css/global/color.css' %}">
    <link rel="stylesheet" href="{% static 'css/global/inicio.css' %}">
</head>
<body>
    <div class="home-container">
        <header class="main-header">
            <div class="header-left">
                <div class="logo-container">
                    <img src="{% static 'images/logo.svg.png' %}" alt="Logo DoeLivros" class="logo-img">
                </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="{% url 'inicio' %}">INICIO</a></li>
                    <li><a href="#">FA√áA UMA DOA√á√ÉO</a></li>
                    <li><a href="{% url 'sobre' %}">SOBRE O PROJETO</a></li>
                    <li><a href="#">FALE CONOSCO</a></li>
                    <li><a href="#">PARCEIROS</a></li>
                </ul>
        </nav>
            </div>
            <div class="header-right">
            </div>
        </header>

        <main class="main-content">
            <section class="search-and-filters">
                <div class="search-bar-container">
                    <input type="text" placeholder="BUSCAR POR T√çTULO, AUTOR, CIDADE...">
                    <button class="search-button">üîç</button>
                </div>
                <div class="filters-container">
                    <select id="genero-filtro" class="filter-dropdown">
                        <option value="" disabled selected>G√äNERO</option>
                        <option value="romance">Romance</option>
                        <option value="ficcao">Fic√ß√£o</option>
                        <option value="fantasia">Fantasia</option>
                        <option value="aventura">Aventura</option>
                        <option value="autoajuda">Autoajuda</option>
                        <option value="biografia">Biografia</option>
                        <option value="historico">Hist√≥rico</option>
                        <option value="misterio">Mist√©rio</option>
                        <option value="infantil">Infantil</option>
                        <option value="poesia">Poesia</option>
                    </select>
                    <select id="estado-filtro" class="filter-dropdown">
                        <option value="" disabled selected>ESTADO DO LIVRO</option>
                        <option value="novo">Novo</option>
                        <option value="usado_bom">Usado - Bom</option>
                        <option value="usado_regular">Usado - Regular</option>
                        <option value="usado_ruim">Usado - Ruim</option>                    </select>
                    <button class="filter-button">FILTRAR</button>
                </div>
            </section>

            <section class="books-grid">
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="romance" data-state="usado_bom">
                        <div class="book-cover">
                            <h3 class="book-title">Dom Casmurro</h3>
                            <p class="book-author">Autor: Machado de Assis</p>
                            <p class="book-state">Estado: Usado - Bom</p>
                            <p class="book-gender">Romance</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="fantasia" data-state="novo">
                        <div class="book-cover">
                            <h3 class="book-title">O Pequeno Pr√≠ncipe</h3>
                            <p class="book-author">Autor: Antoine de Saint-Exup√©ry</p>
                            <p class="book-state">Estado: Novo</p>
                            <p class="book-gender">Fantasia</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="romance" data-state="usado_bom">
                        <div class="book-cover">
                            <h3 class="book-title">Orgulho e Preconceito</h3>
                            <p class="book-author">Autor: Jane Austen</p>
                            <p class="book-state">Estado: Usado - Bom</p>
                            <p class="book-gender">Romance</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="historico" data-state="usado_regular">
                        <div class="book-cover">
                            <h3 class="book-title">Grande Sert√£o: Veredas</h3>
                            <p class="book-author">Autor: Jo√£o Guimar√£es Rosa</p>
                            <p class="book-state">Estado: Usado - Regular</p>
                            <p class="book-gender">Hist√≥rico</p>
                        </div>
                    </div>
                </a>

                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="ficcao" data-state="novo">
                        <div class="book-cover">
                            <h3 class="book-title">1984</h3>
                            <p class="book-author">Autor: George Orwell</p>
                            <p class="book-state">Estado: Novo</p>
                            <p class="book-gender">Fic√ß√£o</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="ficcao" data-state="usado_bom">
                        <div class="book-cover">
                            <h3 class="book-title">A Revolu√ß√£o dos Bichos</h3>
                            <p class="book-author">Autor: George Orwell</p>
                            <p class="book-state">Estado: Usado - Bom</p>
                            <p class="book-gender">Fic√ß√£o</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="fantasia" data-state="usado_bom">
                        <div class="book-cover">
                            <h3 class="book-title">O Senhor dos An√©is</h3>
                            <p class="book-author">Autor: J. R. R. Tolkien</p>
                            <p class="book-state">Estado: Usado - Bom</p>
                            <p class="book-gender">Fantasia</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="historico" data-state="usado_regular">
                        <div class="book-cover">
                            <h3 class="book-title">Cem Anos de Solid√£o</h3>
                            <p class="book-author">Autor: Gabriel Garc√≠a M√°rquez</p>
                            <p class="book-state">Estado: Usado - Regular</p>
                            <p class="book-gender">Hist√≥rico</p>
                        </div>
                    </div>
                </a>

                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="ficcao" data-state="usado_bom">
                        <div class="book-cover">
                            <h3 class="book-title">Alice no Pa√≠s das Maravilhas</h3>
                            <p class="book-author">Autor: Lewis Carroll</p>
                            <p class="book-state">Estado: Usado - Bom</p>
                            <p class="book-gender">Fic√ß√£o</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="aventura" data-state="usado_regular">
                        <div class="book-cover">
                            <h3 class="book-title">Moby Dick</h3>
                            <p class="book-author">Autor: Herman Melville</p>
                            <p class="book-state">Estado: Usado - Regular</p>
                            <p class="book-gender">Aventura</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="autoajuda" data-state="usado_bom">
                        <div class="book-cover">
                            <h3 class="book-title">Como Fazer Amigos e Influenciar Pessoas</h3>
                            <p class="book-author">Autor: Dale Carnegie</p>
                            <p class="book-state">Estado: Usado - Bom</p>
                            <p class="book-gender">Autoajuda</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="poesia" data-state="usado_ruim">
                        <div class="book-cover">
                            <h3 class="book-title">A Divina Com√©dia</h3>
                            <p class="book-author">Autor: Dante Alighieri</p>
                            <p class="book-state">Estado: Usado - Ruim</p>
                            <p class="book-gender">Poesia</p>
                        </div>
                    </div>
                </a>

                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="historico" data-state="usado_bom">
                        <div class="book-cover">
                            <h3 class="book-title">Dom Quixote</h3>
                            <p class="book-author">Autor: Miguel de Cervantes</p>
                            <p class="book-state">Estado: Usado - Bom</p>
                            <p class="book-gender">Hist√≥rico</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="romance" data-state="usado_ruim">
                        <div class="book-cover">
                            <h3 class="book-title">Iracema</h3>
                            <p class="book-author">Autor: Jos√© de Alencar</p>
                            <p class="book-state">Estado: Usado - Ruim</p>
                            <p class="book-gender">Romance</p>
                        </div>
                    </div>
                </a>
                <a href="javascript:void(0)" class="book-card-link">
                    <div class="book-card" data-gender="romance" data-state="novo">
                        <div class="book-cover">
                            <h3 class="book-title">Senhora</h3>
                            <p class="book-author">Autor: Jos√© de Alencar</p>
                            <p class="book-state">Estado: Novo</p>
                            <p class="book-gender">Romance</p>
                        </div>
                    </div>
                </a>
            </section>
        </main>
        <aside class="sidebar">
            <img src="{% static 'images/perfil.png' %}" alt="Foto de Perfil" class="profile-img">
            <div class="profile-info">
                <p class="profile-name">Gabriel Strapazzon Grazioli</p>
                <p class="profile-email">gabrielgrazioli@hotmail.com</p>
            </div>
            <button class="sidebar-button">MINHA CONTA</button>
            <button class="sidebar-button">MINHAS DOA√á√ïES</button>
            <button class="sidebar-button">MEUS FAVORITOS</button>
            <button class="sidebar-button">CENTRAL DE AJUDA</button>
            <a href="{% url 'login' %}" class="sidebar-logout-button">SAIR</a>
        </aside>
    </div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Script para o filtro
        var filterButton = document.querySelector('.filter-button');
        var searchButton = document.querySelector('.search-button'); // Bot√£o da lupa
        var searchInput = document.querySelector('.search-bar-container input'); // Campo de busca
        var genderFilter = document.getElementById('genero-filtro');
        var stateFilter = document.getElementById('estado-filtro');
        var bookCardLinks = document.querySelectorAll('.book-card-link');

        function applyFilters() {
            var selectedGender = genderFilter.value;
            var selectedState = stateFilter.value;
            var searchText = searchInput.value.toLowerCase();

            bookCardLinks.forEach(function (link) {
                var card = link.querySelector('.book-card');
                var cardGender = card.getAttribute('data-gender');
                var cardState = card.getAttribute('data-state');
                var cardTitle = card.querySelector('.book-title').textContent.toLowerCase();
                var cardAuthor = card.querySelector('.book-author').textContent.toLowerCase();
                var cardGenderText = card.querySelector('.book-gender').textContent.toLowerCase();

                var genderMatches = selectedGender === "" || selectedGender === cardGender;
                var stateMatches = selectedState === "" || selectedState === cardState;
                
                var textMatches = true;
                if (searchText) {
                    var searchTerms = searchText.split(' ');
                    textMatches = searchTerms.every(term => 
                        cardTitle.includes(term) || 
                        cardAuthor.includes(term) || 
                        cardGenderText.includes(term)
                    );
                }
                
                if (genderMatches && stateMatches && textMatches) {
                    link.style.display = 'block';
                } else {
                    link.style.display = 'none';
                }
            });
        }

        // Evento de clique no bot√£o "FILTRAR"
        filterButton.addEventListener('click', function (e) {
            e.preventDefault();
            applyFilters();
        });

        // Evento de clique no bot√£o da lupa
        searchButton.addEventListener('click', function (e) {
            e.preventDefault();
            applyFilters();
        });

        // Evento de tecla no campo de busca para o Enter
        searchInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                applyFilters();
            }
        });
    });
</script>
</body>
</html>